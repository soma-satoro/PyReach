# Area Management System

Centralized control over game areas, automatic room numbering, and ASCII map generation.

## Overview

This system consists of:
- **Area Manager**: Manages area definitions and room codes (persistent script, loaded at start)
- **Area Commands**: Commands for managing areas and room codes
- **Map System**: ASCII map generation for areas with coordinate data (very alpha here)

## Area Codes

Areas use a two-letter code system (e.g., "HE" for Hedge, "DT" for Downtown). Room codes are automatically generated by combining the area code with a sequential number: HE01, HE02, HE03, DT12, DT12, etc.

## Default Areas

The system comes with these predefined areas:

- **HE** - The Hedge: The realm that Changelings access that lives between Arcadia and the real world
- **SH** - The Shadow: The Hisil/spirit world
- **WD** - Wilderness: Beyond the city or noted locations (forest, beach, etc.)
- **CT** - Court Holdings: Areas controlled by Changeling courts
- **EL** - Elysium: Holdings controlled by vampire orgs

## Commands

### Area Management (Staff Only)

#### `+area/list`
List all defined areas with their codes, names, room counts, and next available room number.

#### `+area/add <code>=<name>/<description>`
Add a new area to the system.
```
+area/add HI=Highway/Roads leading out of the city.
```

#### `+area/remove <code>`
Remove an area (only if no rooms use it).
```
+area/remove HI
```

#### `+area/info <code>`
Show detailed information about an area.
```
+area/info HE
```

#### `+area/rooms <code>`
List all rooms in a specific area.
```
+area/rooms HE
```

### Room Code Management (Builders+)

#### `+roomcode <area_code>`
Auto-assign the next available sequential room code to your current room.
```
+roomcode HE
# Assigns HE03 if HE01 and HE02 already exist
```

#### `+roomcode <full_code>`
Manually assign a specific room code. (Best not to use this one unless you have an obvious missing code)
```
+roomcode HE05
# Manually assigns HE05 to the room you're in
```

#### `+roomcode/coords <x>,<y>`
Set room coordinates for map generation. (very alpha)
```
+roomcode/coords 10,15
```

#### `+roomcode`
Display current room's code and coordinates.

### Enhanced Room Setup

The existing `+room` command now integrates with the area system:

#### `+room/code=<code>`
Set room code with automatic validation and area name assignment.
```
+room/code=HE        # Auto-assigns next available (e.g., HE03)
+room/code=HE05      # Manually assigns HE05
```

### Map System (All Players - very alpha system that doesn't quite work yet)

#### `+map`
Show ASCII map of current room's area.

#### `+map <area_code>`
Show ASCII map of specific area.
```
+map HE
```

#### `+map/legend`
Show map legend and symbols.

## Setting Up Rooms

### 1. Create a Room
```
@create The Twisted Grove:typeclasses.rooms.Room
```

### 2. Set Area Code (Auto-assign)
```
+roomcode HE
# Auto-assigns HE03 and sets area name to "The Hedge"
```

### 3. Set Room Coordinates (for mapping)
```
+roomcode/coords 5,10
```

### 4. Configure Room Settings
```
+room/hierarchy=The Twisted Grove,The Hedge,Deep Paths
+room/places=on
```

### 5. Add Places
```
places/add Ancient Oak=A massive oak tree twisted into impossible shapes
places/add Thorn Wall=A barrier of thorns that blocks the eastern path
```

## Map Generation

The ASCII map system uses room coordinates to generate visual representations of areas.

### Setting Coordinates

Use `+roomcode/coords <x>,<y>` to set room positions:
```
+roomcode/coords 0,0    # Center room
+roomcode/coords 1,0    # East of center
+roomcode/coords 0,1    # North of center
```

### Map Symbols

- `@` - Your current location
- `#` - Room with coordinates set
- `?` - Room without coordinates (listed separately)
- `-` - Horizontal connection
- `|` - Vertical connection

### Map Display

The map shows rooms with their coordinates and connections. Rooms without coordinates are listed separately below the map.

## Advanced Features

### Area Registration

The system automatically tracks which rooms belong to which areas and maintains sequential numbering. When you assign a room code:

1. The room is registered with the area manager
2. The area name is automatically set based on the area code
3. The next available room number is updated

### Room Validation

All room codes are validated against the defined areas. You cannot assign a room code for an area that doesn't exist.

### Automatic Numbering

The system tracks the next available room number for each area, ensuring no duplicates when using auto-assignment.

## Examples

### Setting up a new Hedge area room:
```
# Go to your new room
@tel The Twisted Grove

# Auto-assign Hedge area code
+roomcode HE
# Result: "Room code auto-assigned: HE03"

# Set coordinates for mapping
+roomcode/coords 5,10

# Configure room details
+room/hierarchy=The Twisted Grove,The Hedge,Deep Paths
+room/places=on

# Add places
places/add Ancient Oak=A massive oak tree twisted into impossible shapes
```

### Viewing the Hedge map:
```
+map HE
```

### Adding a new area:
```
+area/add TW=The Thorns/The deepest, most dangerous part of the Hedge
```

## Best Practices

1. **Use auto-assignment**: Let the system assign room codes automatically to avoid conflicts
2. **Set coordinates**: Add coordinates to rooms for better map visualization
3. **Consistent naming**: Use descriptive area names and clear room hierarchies
4. **Plan your layout**: Think about room positions before setting coordinates
5. **Document areas**: Add descriptions when creating new areas
